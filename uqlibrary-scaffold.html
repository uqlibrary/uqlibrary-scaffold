<link href="../polymer/polymer.html" rel="import">
<link rel="import" href="../core-scaffold/core-scaffold.html">
<link rel="import" href="../core-header-panel/core-header-panel.html">
<link rel="import" href="../core-menu/core-menu.html">
<link rel="import" href="../core-item/core-item.html">
<link rel="import" href="../core-icon-button/core-icon-button.html">
<link rel="import" href="../core-toolbar/core-toolbar.html">
<link rel="import" href="../core-menu/core-submenu.html">
<link rel="import" href="../uqlibrary-search-input/uqlibrary-search-input.html">
<link rel="import" href="../uqlibrary-apps-button/uqlibrary-apps-button.html">
<link rel="import" href="../uqlibrary-notifications-button/uqlibrary-notifications-button.html">
<link rel="import" href="../uqlibrary-account-button/uqlibrary-account-button.html">

<!--
            <uqlibrary-apps-button></uqlibrary-apps-button>
            <uqlibrary-notifications-button></uqlibrary-notifications-button>
            <uqlibrary-account-button hidden?="{{isNarrow}}"></uqlibrary-account-button>
            -->

<!--

Reusable scaffold

##### Example

<uqlibrary-scaffold>Click me or press Enter</uqlibrary-scaffold>

@element uqlibrary-scaffold
@blurb Reusable scaffold containing common styling and dynamic attributes
@status alpha
@homepage https://github.com/uqlibrary/uqlibrary-scaffold
-->

<polymer-element name="uqlibrary-scaffold" attributes="appTitle appTitleLink appLinks searchPlaceholderText">
  <template>
    <style>
      #coreScaffold /deep/ #drawerPanel #menuButton {
        display: none;
      }
      #mainToolbar {
        width: 100%;
      }
    </style>
    <core-media-query query="max-width:320px" queryMatches="{{isNarrow}}"></core-media-query>
    <core-scaffold id="coreScaffold" responsiveWidth="{{width}}">
      <core-header-panel mode="seamed" id="coreHeaderPanel" navigation flex>
        <core-toolbar id="menuToolbar">
          <core-icon-button icon="menu" on-tap="{{onCloseMenu}}"></core-icon-button>
        </core-toolbar>
        <uqlibrary-menu menuFile="{{appMenuFile}}"></uqlibrary-menu>
      </core-header-panel>
      <div tool id="mainToolbar">
        <div horizontal layout>
          <div hidden?="{{drawerIsOpen}}">
            <core-icon-button icon="menu" on-tap="{{onOpenMenu}}"></core-icon-button>
          </div>
          <div flex>
              {{appTitle}}
            <uqlibrary-search-input narrow?="{{isNarrow}}"></uqlibrary-search-input>
          </div>
          <div>
            <uqlibrary-apps-button></uqlibrary-apps-button>
            <uqlibrary-notifications-button></uqlibrary-notifications-button>
            <uqlibrary-account-button hidden?="{{isNarrow}}"></uqlibrary-account-button>
          </div>
        </div>
      </div>
      <div><content></content></div>
    </core-scaffold>
  </template>
  <script>
    Polymer('uqlibrary-scaffold', {
      width: '256px',
      drawerIsOpen: false,

      ready: function () {
        this.$.coreScaffold.closeDrawer();
        if (! this.isNarrow) {
          this.width = '9999px';
        }
      },

      onOpenMenu: function () {
        if (! this.isNarrow) {
          this.width = '256px';
        }
        this.$.coreScaffold.openDrawer();
        this.drawerIsOpen = true;
      },

      onCloseMenu: function () {
        this.$.coreScaffold.closeDrawer();
        if (! this.isNarrow) {
          this.width = '9999px';
        }
        this.drawerIsOpen = false;
      }
    });
  </script>
</polymer-element>