<link rel="import" href="../polymer/polymer.html">

<!-- Iron elements -->
<link rel="import" href="../iron-flex-layout/classes/iron-flex-layout.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../iron-pages/iron-pages.html">
<link rel="import" href="../iron-selector/iron-selector.html">

<link rel="import" href="../iron-media-query/iron-media-query.html">
<link rel="import" href="../iron-icons/communication-icons.html">
<link rel="import" href="../iron-icons/social-icons.html">

<!-- Paper elements -->
<link rel="import" href="../paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../paper-header-panel/paper-header-panel.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-material/paper-material.html">
<link rel="import" href="../paper-menu/paper-menu.html">
<link rel="import" href="../paper-styles/paper-styles-classes.html">
<link rel="import" href="../paper-toast/paper-toast.html">
<link rel="import" href="../paper-toolbar/paper-toolbar.html">

<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-input/paper-input-container.html">


<!--UQ Library elements-->
<link rel="import" href="../uqlibrary-search-input/uqlibrary-search-input.html">

<!--
Reusable scaffold

##### Example

<uqlibrary-scaffold></uqlibrary-scaffold>

@element uqlibrary-scaffold
@blurb Reusable scaffold containing common styling and dynamic attributes
@status alpha
@homepage https://github.com/uqlibrary/uqlibrary-scaffold
-->

<dom-module id="uqlibrary-scaffold">
  <template id="app">

    <iron-media-query query="(max-width: 620px)" query-matches="{{isNarrow}}"></iron-media-query>

    <paper-drawer-panel id="paperDrawerPanel" force-narrow>
      <div drawer>

        <!-- Drawer Toolbar -->
        <paper-toolbar id="drawerToolbar">
          <span>UQ | Library</span>
        </paper-toolbar>

        <!-- Drawer Content -->
        <paper-menu class="list" attr-for-selected="data-route" selected="{{route}}" on-iron-select="onMenuSelect">
          <a data-route="home" href="/">
            <iron-icon icon="home"></iron-icon>
            <span>Home</span>
          </a>

          <a data-route="users" href="/users">
            <iron-icon icon="info"></iron-icon>
            <span>Users</span>
          </a>

          <a data-route="contact" href="/contact">
            <iron-icon icon="help"></iron-icon>
            <span>Help & Feedback</span>
          </a>
        </paper-menu>
      </div>

      <paper-header-panel main>
        <!-- Main Toolbar -->
        <paper-toolbar id="mainToolbar">
          <!-- <paper-icon-button icon="menu" icon="menu" id="paperToggle" tabindex="1" paper-drawer-toggle></paper-icon-button> -->

          <paper-icon-button icon="menu" tabindex="1" paper-drawer-toggle></paper-icon-button>

          <!-- Application name -->
          <div class="appName paper-font-headline">{{appTitle}}</div>

          <!--Toolbar search-->
          <uqlibrary-search-input class="flex" is-narrow$="{{isNarrow}}"></uqlibrary-search-input>

          <!-- Toolbar icons -->
          <paper-icon-button style="margin-left: 24px" icon="communication:chat-bubble-outline" hidden$="{{isNarrow}}"></paper-icon-button>
          <paper-icon-button icon="apps" hidden$="{{isNarrow}}"></paper-icon-button>
          <paper-icon-button icon="social:notifications-none" hidden$="{{isNarrow}}"></paper-icon-button>
          <paper-icon-button icon="account-circle" hidden$="{{isNarrow}}"></paper-icon-button>

        </paper-toolbar>



        <!-- Main Content -->
        <div class="content">
          <iron-pages attr-for-selected="data-route" selected="{{route}}">

            <section data-route="home" class="horizontal around-justified layout wrap">
              <paper-material elevation="1">
                <div>This is a section for a card</div>

              </paper-material>

              <paper-material elevation="1">

                <div>This is a section for another card</div>
              </paper-material>



            <section data-route="user-info">
              <paper-material elevation="1">
                This is the info section
              </paper-material>
            </section>

            <section data-route="contact">
              <paper-material elevation="1">
                <p>This is the contact section</p>
              </paper-material>
            </section>
            </section>

          </iron-pages>
        </div>
      </paper-header-panel>
    </paper-drawer-panel>


  </template>
  <script>

    Polymer({
      is: 'uqlibrary-scaffold',
      properties: {
        /**
         * TODO: description of these properties
         */
//        width: '256px',
//        drawerIsOpen: false,
//        searchIsActive: false,
        enableSearchSuggestions: Boolean,
        appTitle: String,
        appMenuFile: Object
      },
      // Element Lifecycle
      ready: function() {
        // `ready` is called after all elements have been configured, but
        // propagates bottom-up. This element's children are ready, but parents
        // are not.
        //
        // This is the point where you should make modifications to the DOM (when
        // necessary), or kick off any processes the element wants to perform.

//        that = this;
//        this.addEventListener('uqlibrary-menu-close', this.onCloseMenu);
////        this.$.coreScaffold.closeDrawer();
//        if (! this.isNarrow) {
//          this.width = '9999px';
//        }
//        this.$.search.addEventListener('uqlibrary-search-input-button-clicked', function(e) {
//          console.log('clicked search!');
//        });
//        this.$.search.addEventListener('uqlibrary-search-input-button-clicked-narrow', function(e) {
//          console.log('clicked search while narrow!');
//          that.$.scaffoldLeft.setAttribute('hidden', 'true');
//          that.$.scaffoldRight.setAttribute('hidden', 'true');
//          that.searchIsActive = true;
//          document.querySelector('#coreScaffold /deep/ #drawerPanel core-toolbar').style.backgroundColor = "#fff";
//        });
//
//        this.$.search.addEventListener('uqlibrary-search-input-back', function(e) {
//          console.log('clicked back while narrow!');
//          that.$.scaffoldLeft.removeAttribute('hidden');
//          that.$.scaffoldRight.removeAttribute('hidden');
//          that.searchIsActive = false;
//          document.querySelector('#coreScaffold /deep/ #drawerPanel core-toolbar').style.backgroundColor = "#4a075f";
//        });
      },
      attached: function() {
        // `attached` fires once the element and its parents have been inserted
        // into a document.
        //
        // This is a good place to perform any work related to your element's
        // visual state or active behavior (measuring sizes, beginning animations,
        // loading resources, etc).
      },
      detached: function() {
        // The analog to `attached`, `detached` fires when the element has been
        // removed from a document.
        //
        // Use this to clean up anything you did in `attached`.
      }
    });
  </script>
</dom-module>